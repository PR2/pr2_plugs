<launch>
  <!-- machine file -->
  <include file="$(find pr2_machine)/$(env ROBOT).machine" />


  <!-- plug detector: 
    output=plug_tracker_r/pose, 
           plug_tracker_l/pose 
  -->
  <include file="$(find outlet_detection)/launch/dual_plug_tracker.launch"/>


  <!-- filter for plug in gripper detector 
    input=plug_frame_gripper
    output=plug_frame_gripper_filtered
  -->
  <node pkg="pr2_plugs_common" type="detector_filter" name="plug_detector_filter_gripper">
   <param type="string" name="fixed_frame" value="r_wrist_roll_link" />
   <remap from="pose_in" to="plug_frame_gripper" />
   <remap from="pose_out" to="plug_frame_gripper_filtered" />
  </node>
  <node pkg="pr2_plugs_common" type="pose_to_tf" name="plug_filtered_tf_publisher_gripper">
   <param type="string" name="frame_id" value="plug_frame_gripper_filtered" />
   <remap from="pose" to="plug_frame_gripper_filtered" />
  </node>



  <!-- filter for plug on base detector 
    input=plug_frame_base
    output=plug_frame_base_filtered
  -->
  <node pkg="pr2_plugs_common" type="detector_filter" name="plug_detector_filter_base">
   <param type="string" name="fixed_frame" value="base_link" />
   <remap from="pose_in" to="plug_frame_base" />
   <remap from="pose_out" to="plug_frame_base_filtered" />
  </node>
  <node pkg="pr2_plugs_common" type="pose_to_tf" name="plug_filtered_tf_publisher_base">
   <param type="string" name="frame_id" value="plug_frame_base_filtered" />
   <remap from="pose" to="plug_frame_base_filtered" />
  </node>

</launch>
